datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}


enum Issuestatus {
  OPEN
  CLOSED
  ANSWERED
  FORCE_CLOSED
  INAPPROPRIATE
}

enum Level {
  BRONZE
  SILVER
  GOLD
  PLATINUM
  LEGEND
}

enum Role {
  USER
  MODERATOR
  ADMIN
}

model Issue {
  id                String      @id @default(auto()) @map("_id") @db.ObjectId
  author            User        @relation(fields: [userId], references: [id])
  userId            String      @db.ObjectId
  label             String
  level             Level
  creation_date     DateTime
  update_date       DateTime
  comments          Int
  issue_status      Issuestatus
  title             String
  body              String
  issue_contributer String[] // This will be a JSON string containing the id and the name of the user. Because mongodb doensot support many-to-many
}

model UserReport {
  id            String   @id @default(auto()) @map("_id") @db.ObjectId
  author        User     @relation(fields: [userId], references: [id])
  userId        String   @db.ObjectId
  label         String
  moderity      Int
  body          String
  creation_date DateTime
  accepted      Boolean
  seen          Boolean
}

model User {
  id                     String          @id @default(auto()) @map("_id") @db.ObjectId
  name                   String?
  email                  String?         @unique
  emailVerified          String?
  image                  String?
  password               String
  token                  String?
  role                   Role
  bio                    String
  verified               Boolean
  links                  String[]
  reports                UserReport[]
  issues                 Issue[]
  createdAt              DateTime        @default(now())
  updatedAt              DateTime        @updatedAt
}
